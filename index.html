<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japanese Vocabulary Cards</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-layout">
        <!-- Stats Sidebar -->
        <div class="stats-sidebar">
            <div class="stats-header">Statistics</div>
            
            <div class="stats-list" id="statsList">
                <!-- Statistics will be populated dynamically by JavaScript -->
            </div>
            
            <button class="download-stats-button" id="downloadStatsBtn">📥 Download Statistics</button>
        </div>

        <div class="container">
            <div class="language-toggle" style="text-align: right;">
                <button class="language-button" id="languageToggle">🇺🇸 EN</button>
                <button class="reset-button" id="resetBtn" >🔄 Reset</button>
                <button class="flip-direction-button" id="flipDirectionBtn">🇺🇸 → 🇯🇵</button>
            </div>
        
            <div class="header">
                <h1 data-i18n="title">🎌 Japanese Vocabulary Cards</h1>
                <p data-i18n="subtitle">Learn Japanese vocabulary with interactive flashcards</p>
            </div>

            <div class="card-container">
                <div class="card-status-marker" id="cardStatusMarker">GUESSING</div>
                <div class="card" id="flashcard">
                    <div class="card-front">
                        <div class="category" id="category">general</div>
                        <div class="romaji" id="romaji">Loading...</div>
                        <div class="hiragana" id="hiragana">読み込み中...</div>
                    </div>
                    <div class="card-back">
                        <div class="english" id="english">Loading...</div>
                    </div>
                </div>
                <div class="card-hint" data-i18n="click-to-flip">Click to flip</div>
            </div>

            <div class="controls">
                <button class="btn btn-secondary" id="prevBtn" data-i18n="previous">← Previous</button>
                <button class="btn btn-primary" id="flipBtn" data-i18n="flip-card">Flip Card</button>
                <button class="btn btn-secondary" id="nextBtn" data-i18n="next">Next →</button>
            </div>

            <div class="controls" style="margin-top: 15px;">
                <button class="btn btn-success" id="shuffleBtn" data-i18n="shuffle">🔀 Shuffle</button>
            </div>

            <div class="controls" style="margin-top: 15px;">
                <button class="btn btn-correct" id="correctBtn" data-i18n="correct">✓ Correct</button>
                <button class="btn btn-incorrect" id="incorrectBtn" data-i18n="incorrect">✗ Incorrect</button>
            </div>

            <div class="progress">
                <div><span data-i18n="card">Card</span> <span id="currentCard">1</span> <span data-i18n="of">of</span> <span id="totalCards">12</span></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>
        </div>

        <!-- Category Sidebar -->
        <div class="category-sidebar">
            <div class="category-header">Categories</div>
            
            <div class="category-controls">
                <button class="btn-category btn-all" id="selectAllBtn">All</button>
                <button class="btn-category btn-none" id="selectNoneBtn">None</button>
            </div>
            
            <div class="category-list" id="categoryList">
                <!-- Categories will be populated dynamically by JavaScript -->
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Development auto-reload functionality
        if (location.hostname === 'localhost' || location.hostname === '127.0.0.1') {
            let lastModified = null;
            
            async function checkForUpdates() {
                try {
                    const response = await fetch('/api/last-modified');
                    const data = await response.json();
                    
                    if (lastModified && data.lastModified !== lastModified) {
                        console.log('🔄 Files changed, reloading page...');
                        location.reload();
                    }
                    
                    lastModified = data.lastModified;
                } catch (error) {
                    // Silently handle errors in production
                }
            }
            
            // Check for updates every 1000ms
            setInterval(checkForUpdates, 1000);
            checkForUpdates();
        }
    </script>
</body>
</html>
